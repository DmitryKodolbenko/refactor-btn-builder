{"ast":null,"code":"\"use strict\";\n\nvar _createForOfIteratorHelper = require(\"/Users/sepezho/Work/tonana/fe/node_modules/@babel/runtime/helpers/createForOfIteratorHelper.js\").default;\nvar _toConsumableArray = require(\"/Users/sepezho/Work/tonana/fe/node_modules/@babel/runtime/helpers/toConsumableArray.js\").default;\nvar _classCallCheck = require(\"/Users/sepezho/Work/tonana/fe/node_modules/@babel/runtime/helpers/classCallCheck.js\").default;\nvar _createClass = require(\"/Users/sepezho/Work/tonana/fe/node_modules/@babel/runtime/helpers/createClass.js\").default;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Slice = void 0;\nvar __1 = require(\"..\");\nvar Slice = /*#__PURE__*/function () {\n  function Slice(sourceBits, sourceRefs) {\n    var _this = this;\n    _classCallCheck(this, Slice);\n    this.refs = [];\n    this.skip = function (bits) {\n      _this.bits.skip(bits);\n    };\n    this.readUint = function (bits) {\n      return _this.bits.readUint(bits);\n    };\n    this.readUintNumber = function (bits) {\n      return _this.bits.readUintNumber(bits);\n    };\n    this.readInt = function (bits) {\n      return _this.bits.readInt(bits);\n    };\n    this.readIntNumber = function (bits) {\n      return _this.bits.readIntNumber(bits);\n    };\n    this.readBuffer = function (size) {\n      return _this.bits.readBuffer(size);\n    };\n    this.readBit = function () {\n      return _this.bits.readBit();\n    };\n    this.readCoins = function () {\n      return _this.bits.readCoins();\n    };\n    this.readVarUInt = function (headerBits) {\n      return _this.bits.readVarUInt(headerBits);\n    };\n    this.readVarUIntNumber = function (headerBits) {\n      return _this.bits.readVarUIntNumber(headerBits);\n    };\n    this.readRemaining = function () {\n      return _this.bits.readRemaining();\n    };\n    this.readRemainingBytes = function () {\n      if (_this.bits.remaining % 8 !== 0) {\n        throw Error('Number remaining of bits is not multiply of 8');\n      }\n      return _this.bits.readBuffer(_this.bits.remaining / 8);\n    };\n    this.readAddress = function () {\n      return _this.bits.readAddress();\n    };\n    this.readUnaryLength = function () {\n      return _this.bits.readUnaryLength();\n    };\n    this.readBitString = function (n) {\n      return _this.bits.readBitString(n);\n    };\n    this.readOptDict = function (keySize, extractor) {\n      if (_this.readBit()) {\n        return _this.readDict(keySize, extractor);\n      } else {\n        return null;\n      }\n    };\n    this.readDict = function (keySize, extractor) {\n      var first = _this.refs.shift();\n      if (first) {\n        return (0, __1.parseDict)(first.beginParse(), keySize, extractor);\n      } else {\n        throw Error('No ref');\n      }\n    };\n    this.readRef = function () {\n      var first = _this.refs.shift();\n      if (first) {\n        return Slice.fromCell(first);\n      } else {\n        throw Error('No ref');\n      }\n    };\n    this.readCell = function () {\n      var first = _this.refs.shift();\n      if (first) {\n        return first;\n      } else {\n        throw Error('No ref');\n      }\n    };\n    this.preloadCell = function () {\n      var first = _this.refs[0];\n      if (first) {\n        return first;\n      } else {\n        throw Error('No ref');\n      }\n    };\n    this.clone = function () {\n      // Copy remaining\n      var cloned = _this.sourceBits.clone();\n      var reader = new __1.BitStringReader(cloned);\n      reader.skip(_this.bits.currentOffset);\n      var remaining = reader.readRemaining();\n      var remainingRefs = _toConsumableArray(_this.refs);\n      // Build slice\n      return new Slice(remaining, remainingRefs);\n    };\n    this.toCell = function () {\n      // Copy remaining\n      var cloned = _this.sourceBits.clone();\n      var reader = new __1.BitStringReader(cloned);\n      reader.skip(_this.bits.currentOffset);\n      var remaining = reader.readRemaining();\n      var cell = new __1.Cell('ordinary', remaining);\n      var _iterator = _createForOfIteratorHelper(_this.refs),\n        _step;\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var r = _step.value;\n          cell.refs.push(r);\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n      return cell;\n    };\n    this.sourceBits = sourceBits.clone();\n    this.refs = _toConsumableArray(sourceRefs);\n    this.bits = new __1.BitStringReader(this.sourceBits);\n  }\n  _createClass(Slice, [{\n    key: \"remaining\",\n    get: function get() {\n      return this.bits.remaining;\n    }\n  }, {\n    key: \"remainingRefs\",\n    get: function get() {\n      return this.refs.length;\n    }\n  }], [{\n    key: \"fromCell\",\n    value: function fromCell(cell) {\n      if (cell.isExotic) {\n        throw Error('Unable to create slice from exotic');\n      }\n      return new Slice(cell.bits, cell.refs);\n    }\n  }]);\n  return Slice;\n}();\nexports.Slice = Slice;","map":{"version":3,"names":["Object","defineProperty","exports","value","Slice","__1","require","sourceBits","sourceRefs","refs","skip","bits","readUint","readUintNumber","readInt","readIntNumber","readBuffer","size","readBit","readCoins","readVarUInt","headerBits","readVarUIntNumber","readRemaining","readRemainingBytes","remaining","Error","readAddress","readUnaryLength","readBitString","n","readOptDict","keySize","extractor","readDict","first","shift","parseDict","beginParse","readRef","fromCell","readCell","preloadCell","clone","cloned","reader","BitStringReader","currentOffset","remainingRefs","toCell","cell","Cell","r","push","length","isExotic"],"sources":["/Users/sepezho/Work/tonana/fe/node_modules/ton/dist/boc/Slice.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Slice = void 0;\nconst __1 = require(\"..\");\nclass Slice {\n    constructor(sourceBits, sourceRefs) {\n        this.refs = [];\n        this.skip = (bits) => {\n            this.bits.skip(bits);\n        };\n        this.readUint = (bits) => {\n            return this.bits.readUint(bits);\n        };\n        this.readUintNumber = (bits) => {\n            return this.bits.readUintNumber(bits);\n        };\n        this.readInt = (bits) => {\n            return this.bits.readInt(bits);\n        };\n        this.readIntNumber = (bits) => {\n            return this.bits.readIntNumber(bits);\n        };\n        this.readBuffer = (size) => {\n            return this.bits.readBuffer(size);\n        };\n        this.readBit = () => {\n            return this.bits.readBit();\n        };\n        this.readCoins = () => {\n            return this.bits.readCoins();\n        };\n        this.readVarUInt = (headerBits) => {\n            return this.bits.readVarUInt(headerBits);\n        };\n        this.readVarUIntNumber = (headerBits) => {\n            return this.bits.readVarUIntNumber(headerBits);\n        };\n        this.readRemaining = () => {\n            return this.bits.readRemaining();\n        };\n        this.readRemainingBytes = () => {\n            if (this.bits.remaining % 8 !== 0) {\n                throw Error('Number remaining of bits is not multiply of 8');\n            }\n            return this.bits.readBuffer(this.bits.remaining / 8);\n        };\n        this.readAddress = () => {\n            return this.bits.readAddress();\n        };\n        this.readUnaryLength = () => {\n            return this.bits.readUnaryLength();\n        };\n        this.readBitString = (n) => {\n            return this.bits.readBitString(n);\n        };\n        this.readOptDict = (keySize, extractor) => {\n            if (this.readBit()) {\n                return this.readDict(keySize, extractor);\n            }\n            else {\n                return null;\n            }\n        };\n        this.readDict = (keySize, extractor) => {\n            let first = this.refs.shift();\n            if (first) {\n                return (0, __1.parseDict)(first.beginParse(), keySize, extractor);\n            }\n            else {\n                throw Error('No ref');\n            }\n        };\n        this.readRef = () => {\n            let first = this.refs.shift();\n            if (first) {\n                return Slice.fromCell(first);\n            }\n            else {\n                throw Error('No ref');\n            }\n        };\n        this.readCell = () => {\n            let first = this.refs.shift();\n            if (first) {\n                return first;\n            }\n            else {\n                throw Error('No ref');\n            }\n        };\n        this.preloadCell = () => {\n            let first = this.refs[0];\n            if (first) {\n                return first;\n            }\n            else {\n                throw Error('No ref');\n            }\n        };\n        this.clone = () => {\n            // Copy remaining\n            const cloned = this.sourceBits.clone();\n            const reader = new __1.BitStringReader(cloned);\n            reader.skip(this.bits.currentOffset);\n            const remaining = reader.readRemaining();\n            const remainingRefs = [...this.refs];\n            // Build slice\n            return new Slice(remaining, remainingRefs);\n        };\n        this.toCell = () => {\n            // Copy remaining\n            const cloned = this.sourceBits.clone();\n            const reader = new __1.BitStringReader(cloned);\n            reader.skip(this.bits.currentOffset);\n            const remaining = reader.readRemaining();\n            let cell = new __1.Cell('ordinary', remaining);\n            for (let r of this.refs) {\n                cell.refs.push(r);\n            }\n            return cell;\n        };\n        this.sourceBits = sourceBits.clone();\n        this.refs = [...sourceRefs];\n        this.bits = new __1.BitStringReader(this.sourceBits);\n    }\n    static fromCell(cell) {\n        if (cell.isExotic) {\n            throw Error('Unable to create slice from exotic');\n        }\n        return new Slice(cell.bits, cell.refs);\n    }\n    get remaining() {\n        return this.bits.remaining;\n    }\n    get remainingRefs() {\n        return this.refs.length;\n    }\n}\nexports.Slice = Slice;\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}