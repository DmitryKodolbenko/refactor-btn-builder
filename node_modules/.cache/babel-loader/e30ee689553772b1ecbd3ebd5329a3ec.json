{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getSecureRandomNumber = exports.getSecureRandomWords = exports.getSecureRandomBytes = void 0;\nconst ton_crypto_primitives_1 = require(\"ton-crypto-primitives\");\nasync function getSecureRandomBytes(size) {\n  return (0, ton_crypto_primitives_1.getSecureRandomBytes)(size);\n}\nexports.getSecureRandomBytes = getSecureRandomBytes;\nasync function getSecureRandomWords(size) {\n  return getSecureRandomWords(size);\n}\nexports.getSecureRandomWords = getSecureRandomWords;\nasync function getSecureRandomNumber(min, max) {\n  let range = max - min;\n  var bitsNeeded = Math.ceil(Math.log2(range));\n  if (bitsNeeded > 53) {\n    throw new Error('Range is too large');\n  }\n  var bytesNeeded = Math.ceil(bitsNeeded / 8);\n  var mask = Math.pow(2, bitsNeeded) - 1;\n  while (true) {\n    let res = await getSecureRandomBytes(bitsNeeded);\n    let power = (bytesNeeded - 1) * 8;\n    let numberValue = 0;\n    for (var i = 0; i < bytesNeeded; i++) {\n      numberValue += res[i] * Math.pow(2, power);\n      power -= 8;\n    }\n    numberValue = numberValue & mask; // Truncate\n    if (numberValue >= range) {\n      continue;\n    }\n    return min + numberValue;\n  }\n}\nexports.getSecureRandomNumber = getSecureRandomNumber;","map":{"version":3,"names":["Object","defineProperty","exports","value","getSecureRandomNumber","getSecureRandomWords","getSecureRandomBytes","ton_crypto_primitives_1","require","size","min","max","range","bitsNeeded","Math","ceil","log2","Error","bytesNeeded","mask","pow","res","power","numberValue","i"],"sources":["/Users/sepezho/Work/tonana/fe/node_modules/ton/node_modules/ton-crypto/dist/primitives/getSecureRandom.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getSecureRandomNumber = exports.getSecureRandomWords = exports.getSecureRandomBytes = void 0;\nconst ton_crypto_primitives_1 = require(\"ton-crypto-primitives\");\nasync function getSecureRandomBytes(size) {\n    return (0, ton_crypto_primitives_1.getSecureRandomBytes)(size);\n}\nexports.getSecureRandomBytes = getSecureRandomBytes;\nasync function getSecureRandomWords(size) {\n    return getSecureRandomWords(size);\n}\nexports.getSecureRandomWords = getSecureRandomWords;\nasync function getSecureRandomNumber(min, max) {\n    let range = max - min;\n    var bitsNeeded = Math.ceil(Math.log2(range));\n    if (bitsNeeded > 53) {\n        throw new Error('Range is too large');\n    }\n    var bytesNeeded = Math.ceil(bitsNeeded / 8);\n    var mask = Math.pow(2, bitsNeeded) - 1;\n    while (true) {\n        let res = await getSecureRandomBytes(bitsNeeded);\n        let power = (bytesNeeded - 1) * 8;\n        let numberValue = 0;\n        for (var i = 0; i < bytesNeeded; i++) {\n            numberValue += res[i] * Math.pow(2, power);\n            power -= 8;\n        }\n        numberValue = numberValue & mask; // Truncate\n        if (numberValue >= range) {\n            continue;\n        }\n        return min + numberValue;\n    }\n}\nexports.getSecureRandomNumber = getSecureRandomNumber;\n"],"mappings":"AAAA,YAAY;;AACZA,MAAM,CAACC,cAAc,CAACC,OAAO,EAAE,YAAY,EAAE;EAAEC,KAAK,EAAE;AAAK,CAAC,CAAC;AAC7DD,OAAO,CAACE,qBAAqB,GAAGF,OAAO,CAACG,oBAAoB,GAAGH,OAAO,CAACI,oBAAoB,GAAG,KAAK,CAAC;AACpG,MAAMC,uBAAuB,GAAGC,OAAO,CAAC,uBAAuB,CAAC;AAChE,eAAeF,oBAAoB,CAACG,IAAI,EAAE;EACtC,OAAO,CAAC,CAAC,EAAEF,uBAAuB,CAACD,oBAAoB,EAAEG,IAAI,CAAC;AAClE;AACAP,OAAO,CAACI,oBAAoB,GAAGA,oBAAoB;AACnD,eAAeD,oBAAoB,CAACI,IAAI,EAAE;EACtC,OAAOJ,oBAAoB,CAACI,IAAI,CAAC;AACrC;AACAP,OAAO,CAACG,oBAAoB,GAAGA,oBAAoB;AACnD,eAAeD,qBAAqB,CAACM,GAAG,EAAEC,GAAG,EAAE;EAC3C,IAAIC,KAAK,GAAGD,GAAG,GAAGD,GAAG;EACrB,IAAIG,UAAU,GAAGC,IAAI,CAACC,IAAI,CAACD,IAAI,CAACE,IAAI,CAACJ,KAAK,CAAC,CAAC;EAC5C,IAAIC,UAAU,GAAG,EAAE,EAAE;IACjB,MAAM,IAAII,KAAK,CAAC,oBAAoB,CAAC;EACzC;EACA,IAAIC,WAAW,GAAGJ,IAAI,CAACC,IAAI,CAACF,UAAU,GAAG,CAAC,CAAC;EAC3C,IAAIM,IAAI,GAAGL,IAAI,CAACM,GAAG,CAAC,CAAC,EAAEP,UAAU,CAAC,GAAG,CAAC;EACtC,OAAO,IAAI,EAAE;IACT,IAAIQ,GAAG,GAAG,MAAMf,oBAAoB,CAACO,UAAU,CAAC;IAChD,IAAIS,KAAK,GAAG,CAACJ,WAAW,GAAG,CAAC,IAAI,CAAC;IACjC,IAAIK,WAAW,GAAG,CAAC;IACnB,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGN,WAAW,EAAEM,CAAC,EAAE,EAAE;MAClCD,WAAW,IAAIF,GAAG,CAACG,CAAC,CAAC,GAAGV,IAAI,CAACM,GAAG,CAAC,CAAC,EAAEE,KAAK,CAAC;MAC1CA,KAAK,IAAI,CAAC;IACd;IACAC,WAAW,GAAGA,WAAW,GAAGJ,IAAI,CAAC,CAAC;IAClC,IAAII,WAAW,IAAIX,KAAK,EAAE;MACtB;IACJ;IACA,OAAOF,GAAG,GAAGa,WAAW;EAC5B;AACJ;AACArB,OAAO,CAACE,qBAAqB,GAAGA,qBAAqB"},"metadata":{},"sourceType":"script"}