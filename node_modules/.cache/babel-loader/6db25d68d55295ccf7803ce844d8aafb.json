{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.WalletContract = void 0;\nconst createWalletTransfer_1 = require(\"./messages/createWalletTransfer\");\nconst contractAddress_1 = require(\"./contractAddress\");\nclass WalletContract {\n  constructor(client, source, address) {\n    this.client = client;\n    this.address = address;\n    this.source = source;\n  }\n  static create(client, source) {\n    let address = (0, contractAddress_1.contractAddress)(source);\n    return new WalletContract(client, source, address);\n  }\n  async getSeqNo() {\n    if (await this.client.isContractDeployed(this.address)) {\n      let res = await this.client.callGetMethod(this.address, 'seqno');\n      return parseInt(res.stack[0][1], 16);\n    } else {\n      return 0;\n    }\n  }\n  createTransfer(args) {\n    switch (this.source.walletVersion) {\n      case 'v1':\n        return (0, createWalletTransfer_1.createWalletTransferV1)({\n          seqno: args.seqno,\n          sendMode: args.sendMode,\n          secretKey: args.secretKey,\n          order: args.order\n        });\n      case 'v2':\n        return (0, createWalletTransfer_1.createWalletTransferV2)({\n          seqno: args.seqno,\n          sendMode: args.sendMode,\n          secretKey: args.secretKey,\n          order: args.order,\n          timeout: args.timeout\n        });\n      case 'v3':\n        return (0, createWalletTransfer_1.createWalletTransferV3)({\n          seqno: args.seqno,\n          sendMode: args.sendMode,\n          secretKey: args.secretKey,\n          order: args.order,\n          walletId: this.source.walletId,\n          timeout: args.timeout\n        });\n      case 'v4':\n        return (0, createWalletTransfer_1.createWalletTransferV4)({\n          seqno: args.seqno,\n          sendMode: args.sendMode,\n          secretKey: args.secretKey,\n          order: args.order,\n          walletId: this.source.walletId,\n          timeout: args.timeout\n        });\n      default:\n        throw Error('Unknown contract type: ' + this.source.type);\n    }\n  }\n}\nexports.WalletContract = WalletContract;","map":{"version":3,"names":["Object","defineProperty","exports","value","WalletContract","createWalletTransfer_1","require","contractAddress_1","constructor","client","source","address","create","contractAddress","getSeqNo","isContractDeployed","res","callGetMethod","parseInt","stack","createTransfer","args","walletVersion","createWalletTransferV1","seqno","sendMode","secretKey","order","createWalletTransferV2","timeout","createWalletTransferV3","walletId","createWalletTransferV4","Error","type"],"sources":["/Users/sepezho/Work/tonana/fe/node_modules/ton/dist/contracts/WalletContract.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.WalletContract = void 0;\nconst createWalletTransfer_1 = require(\"./messages/createWalletTransfer\");\nconst contractAddress_1 = require(\"./contractAddress\");\nclass WalletContract {\n    constructor(client, source, address) {\n        this.client = client;\n        this.address = address;\n        this.source = source;\n    }\n    static create(client, source) {\n        let address = (0, contractAddress_1.contractAddress)(source);\n        return new WalletContract(client, source, address);\n    }\n    async getSeqNo() {\n        if (await this.client.isContractDeployed(this.address)) {\n            let res = await this.client.callGetMethod(this.address, 'seqno');\n            return parseInt(res.stack[0][1], 16);\n        }\n        else {\n            return 0;\n        }\n    }\n    createTransfer(args) {\n        switch (this.source.walletVersion) {\n            case 'v1':\n                return (0, createWalletTransfer_1.createWalletTransferV1)({ seqno: args.seqno, sendMode: args.sendMode, secretKey: args.secretKey, order: args.order });\n            case 'v2':\n                return (0, createWalletTransfer_1.createWalletTransferV2)({ seqno: args.seqno, sendMode: args.sendMode, secretKey: args.secretKey, order: args.order, timeout: args.timeout });\n            case 'v3':\n                return (0, createWalletTransfer_1.createWalletTransferV3)({ seqno: args.seqno, sendMode: args.sendMode, secretKey: args.secretKey, order: args.order, walletId: this.source.walletId, timeout: args.timeout });\n            case 'v4':\n                return (0, createWalletTransfer_1.createWalletTransferV4)({ seqno: args.seqno, sendMode: args.sendMode, secretKey: args.secretKey, order: args.order, walletId: this.source.walletId, timeout: args.timeout });\n            default:\n                throw Error('Unknown contract type: ' + this.source.type);\n        }\n    }\n}\nexports.WalletContract = WalletContract;\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}