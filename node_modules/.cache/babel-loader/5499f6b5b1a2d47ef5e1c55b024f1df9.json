{"ast":null,"code":"var _createForOfIteratorHelper = require(\"/Users/sepezho/Work/tonana/fe/node_modules/@babel/runtime/helpers/createForOfIteratorHelper.js\").default;\nvar _require = require(\"./Utils\"),\n  BN = _require.BN,\n  nacl = _require.nacl,\n  sha256 = _require.sha256,\n  fromNano = _require.fromNano,\n  toNano = _require.toNano,\n  bytesToHex = _require.bytesToHex,\n  hexToBytes = _require.hexToBytes,\n  stringToBytes = _require.stringToBytes,\n  crc32c = _require.crc32c,\n  crc16 = _require.crc16,\n  concatBytes = _require.concatBytes,\n  bytesToBase64 = _require.bytesToBase64,\n  base64ToBytes = _require.base64ToBytes,\n  base64toString = _require.base64toString,\n  stringToBase64 = _require.stringToBase64,\n  compareBytes = _require.compareBytes,\n  readNBytesUIntFromArray = _require.readNBytesUIntFromArray;\nvar Address = require(\"./Address\").default;\n\n// ton://transfer/EQA0i8-CdGnF_DhUHHf92R1ONH6sIA9vLZ_WLcCIhfBBXwtG\n// ton://transfer/EQA0i8-CdGnF_DhUHHf92R1ONH6sIA9vLZ_WLcCIhfBBXwtG?amount=1000000000\n// ton://transfer/EQA0i8-CdGnF_DhUHHf92R1ONH6sIA9vLZ_WLcCIhfBBXwtG?amount=1000000000&text=data\n// ton://transfer/EQA0i8-CdGnF_DhUHHf92R1ONH6sIA9vLZ_WLcCIhfBBXwtG?amount=1000000000&text=foo%3A%2F%2Fbar%2C%2Fbaz%3Famount%3D1%26text%3D%D1%80%D1%83\n/**\n * @param url {string}\n * @return {{address: string, amount?: string, text?: string}}\n * @throws if invalid url\n */\nfunction parseTransferUrl(url) {\n  var PREFIX = 'ton://transfer/';\n  if (!url.startsWith(PREFIX)) {\n    throw new Error('must starts with ' + PREFIX);\n  }\n  var arr = url.substring(PREFIX.length).split('?');\n  if (arr.length > 2) {\n    throw new Error('multiple \"?\"');\n  }\n  var address = arr[0];\n  if (!Address.isValid(address)) {\n    throw new Error('invalid address format ' + address);\n  }\n  var result = {\n    address: address\n  };\n  var rest = arr[1];\n  if (rest && rest.length) {\n    var pairs = rest.split('&').map(function (s) {\n      return s.split('=');\n    });\n    var _iterator = _createForOfIteratorHelper(pairs),\n      _step;\n    try {\n      for (_iterator.s(); !(_step = _iterator.n()).done;) {\n        var pair = _step.value;\n        if (pair.length !== 2) throw new Error('invalid url pair');\n        var key = pair[0];\n        var value = pair[1];\n        if (key === 'amount') {\n          if (result.amount) {\n            throw new Error('amount already set');\n          }\n          var bn = new BN(value);\n          if (bn.isNeg()) {\n            throw new Error('negative amount');\n          }\n          result.amount = value;\n        } else if (key === 'text') {\n          if (result.text) {\n            throw new Error('text already set');\n          }\n          result.text = decodeURIComponent(value);\n        } else {\n          throw new Error('unknown url var ' + key);\n        }\n      }\n    } catch (err) {\n      _iterator.e(err);\n    } finally {\n      _iterator.f();\n    }\n  }\n  return result;\n}\n\n/**\n * @param address   {string}\n * @param amount?    {string} in nano\n * @param text?   {string}\n * @return {string}\n */\nfunction formatTransferUrl(address, amount, text) {\n  var url = 'ton://transfer/' + address;\n  var params = [];\n  if (amount) {\n    params.push('amount=' + amount);\n  }\n  if (text) {\n    params.push('text=' + encodeURIComponent(text));\n  }\n  if (params.length === 0) return url;\n  return url + '?' + params.join('&');\n}\nmodule.exports = {\n  Address: Address,\n  BN: BN,\n  nacl: nacl,\n  sha256: sha256,\n  fromNano: fromNano,\n  toNano: toNano,\n  bytesToHex: bytesToHex,\n  hexToBytes: hexToBytes,\n  stringToBytes: stringToBytes,\n  crc32c: crc32c,\n  crc16: crc16,\n  concatBytes: concatBytes,\n  bytesToBase64: bytesToBase64,\n  base64ToBytes: base64ToBytes,\n  base64toString: base64toString,\n  stringToBase64: stringToBase64,\n  compareBytes: compareBytes,\n  readNBytesUIntFromArray: readNBytesUIntFromArray,\n  parseTransferUrl: parseTransferUrl,\n  formatTransferUrl: formatTransferUrl\n};","map":{"version":3,"names":["require","BN","nacl","sha256","fromNano","toNano","bytesToHex","hexToBytes","stringToBytes","crc32c","crc16","concatBytes","bytesToBase64","base64ToBytes","base64toString","stringToBase64","compareBytes","readNBytesUIntFromArray","Address","default","parseTransferUrl","url","PREFIX","startsWith","Error","arr","substring","length","split","address","isValid","result","rest","pairs","map","s","pair","key","value","amount","bn","isNeg","text","decodeURIComponent","formatTransferUrl","params","push","encodeURIComponent","join","module","exports"],"sources":["/Users/sepezho/Work/tonana/fe/node_modules/tonweb/src/utils/index.js"],"sourcesContent":["const {\n    BN,\n    nacl,\n    sha256,\n    fromNano,\n    toNano,\n    bytesToHex,\n    hexToBytes,\n    stringToBytes,\n    crc32c,\n    crc16,\n    concatBytes,\n    bytesToBase64,\n    base64ToBytes,\n    base64toString,\n    stringToBase64,\n    compareBytes,\n    readNBytesUIntFromArray\n} = require(\"./Utils\");\n\nconst Address = require(\"./Address\").default;\n\n// ton://transfer/EQA0i8-CdGnF_DhUHHf92R1ONH6sIA9vLZ_WLcCIhfBBXwtG\n// ton://transfer/EQA0i8-CdGnF_DhUHHf92R1ONH6sIA9vLZ_WLcCIhfBBXwtG?amount=1000000000\n// ton://transfer/EQA0i8-CdGnF_DhUHHf92R1ONH6sIA9vLZ_WLcCIhfBBXwtG?amount=1000000000&text=data\n// ton://transfer/EQA0i8-CdGnF_DhUHHf92R1ONH6sIA9vLZ_WLcCIhfBBXwtG?amount=1000000000&text=foo%3A%2F%2Fbar%2C%2Fbaz%3Famount%3D1%26text%3D%D1%80%D1%83\n/**\n * @param url {string}\n * @return {{address: string, amount?: string, text?: string}}\n * @throws if invalid url\n */\nfunction parseTransferUrl(url) {\n    const PREFIX = 'ton://transfer/';\n\n    if (!url.startsWith(PREFIX)) {\n        throw new Error('must starts with ' + PREFIX);\n    }\n\n    const arr = url.substring(PREFIX.length).split('?');\n    if (arr.length > 2) {\n        throw new Error('multiple \"?\"');\n    }\n\n    const address = arr[0];\n    if (!Address.isValid(address)) {\n        throw new Error('invalid address format ' + address);\n    }\n    const result = {\n        address: address\n    };\n\n    const rest = arr[1];\n    if (rest && rest.length) {\n        const pairs = rest.split('&').map(s => s.split('='));\n\n        for (const pair of pairs) {\n            if (pair.length !== 2) throw new Error('invalid url pair');\n            const key = pair[0];\n            const value = pair[1];\n\n            if (key === 'amount') {\n                if (result.amount) {\n                    throw new Error('amount already set');\n                }\n                const bn = new BN(value);\n                if (bn.isNeg()) {\n                    throw new Error('negative amount');\n                }\n                result.amount = value;\n            } else if (key === 'text') {\n                if (result.text) {\n                    throw new Error('text already set');\n                }\n                result.text = decodeURIComponent(value);\n            } else {\n                throw new Error('unknown url var ' + key);\n            }\n        }\n    }\n    return result;\n}\n\n/**\n * @param address   {string}\n * @param amount?    {string} in nano\n * @param text?   {string}\n * @return {string}\n */\nfunction formatTransferUrl(address, amount, text) {\n    let url = 'ton://transfer/' + address;\n\n    const params = [];\n\n    if (amount) {\n        params.push('amount=' + amount);\n    }\n    if (text) {\n        params.push('text=' + encodeURIComponent(text));\n    }\n\n    if (params.length === 0) return url;\n\n    return url + '?' + params.join('&');\n}\n\nmodule.exports = {\n    Address,\n    BN,\n    nacl,\n    sha256,\n    fromNano,\n    toNano,\n    bytesToHex,\n    hexToBytes,\n    stringToBytes,\n    crc32c,\n    crc16,\n    concatBytes,\n    bytesToBase64,\n    base64ToBytes,\n    base64toString,\n    stringToBase64,\n    compareBytes,\n    readNBytesUIntFromArray,\n    parseTransferUrl,\n    formatTransferUrl\n};"],"mappings":";AAAA,eAkBIA,OAAO,CAAC,SAAS,CAAC;EAjBlBC,EAAE,YAAFA,EAAE;EACFC,IAAI,YAAJA,IAAI;EACJC,MAAM,YAANA,MAAM;EACNC,QAAQ,YAARA,QAAQ;EACRC,MAAM,YAANA,MAAM;EACNC,UAAU,YAAVA,UAAU;EACVC,UAAU,YAAVA,UAAU;EACVC,aAAa,YAAbA,aAAa;EACbC,MAAM,YAANA,MAAM;EACNC,KAAK,YAALA,KAAK;EACLC,WAAW,YAAXA,WAAW;EACXC,aAAa,YAAbA,aAAa;EACbC,aAAa,YAAbA,aAAa;EACbC,cAAc,YAAdA,cAAc;EACdC,cAAc,YAAdA,cAAc;EACdC,YAAY,YAAZA,YAAY;EACZC,uBAAuB,YAAvBA,uBAAuB;AAG3B,IAAMC,OAAO,GAAGlB,OAAO,CAAC,WAAW,CAAC,CAACmB,OAAO;;AAE5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAASC,gBAAgB,CAACC,GAAG,EAAE;EAC3B,IAAMC,MAAM,GAAG,iBAAiB;EAEhC,IAAI,CAACD,GAAG,CAACE,UAAU,CAACD,MAAM,CAAC,EAAE;IACzB,MAAM,IAAIE,KAAK,CAAC,mBAAmB,GAAGF,MAAM,CAAC;EACjD;EAEA,IAAMG,GAAG,GAAGJ,GAAG,CAACK,SAAS,CAACJ,MAAM,CAACK,MAAM,CAAC,CAACC,KAAK,CAAC,GAAG,CAAC;EACnD,IAAIH,GAAG,CAACE,MAAM,GAAG,CAAC,EAAE;IAChB,MAAM,IAAIH,KAAK,CAAC,cAAc,CAAC;EACnC;EAEA,IAAMK,OAAO,GAAGJ,GAAG,CAAC,CAAC,CAAC;EACtB,IAAI,CAACP,OAAO,CAACY,OAAO,CAACD,OAAO,CAAC,EAAE;IAC3B,MAAM,IAAIL,KAAK,CAAC,yBAAyB,GAAGK,OAAO,CAAC;EACxD;EACA,IAAME,MAAM,GAAG;IACXF,OAAO,EAAEA;EACb,CAAC;EAED,IAAMG,IAAI,GAAGP,GAAG,CAAC,CAAC,CAAC;EACnB,IAAIO,IAAI,IAAIA,IAAI,CAACL,MAAM,EAAE;IACrB,IAAMM,KAAK,GAAGD,IAAI,CAACJ,KAAK,CAAC,GAAG,CAAC,CAACM,GAAG,CAAC,UAAAC,CAAC;MAAA,OAAIA,CAAC,CAACP,KAAK,CAAC,GAAG,CAAC;IAAA,EAAC;IAAC,2CAElCK,KAAK;MAAA;IAAA;MAAxB,oDAA0B;QAAA,IAAfG,IAAI;QACX,IAAIA,IAAI,CAACT,MAAM,KAAK,CAAC,EAAE,MAAM,IAAIH,KAAK,CAAC,kBAAkB,CAAC;QAC1D,IAAMa,GAAG,GAAGD,IAAI,CAAC,CAAC,CAAC;QACnB,IAAME,KAAK,GAAGF,IAAI,CAAC,CAAC,CAAC;QAErB,IAAIC,GAAG,KAAK,QAAQ,EAAE;UAClB,IAAIN,MAAM,CAACQ,MAAM,EAAE;YACf,MAAM,IAAIf,KAAK,CAAC,oBAAoB,CAAC;UACzC;UACA,IAAMgB,EAAE,GAAG,IAAIvC,EAAE,CAACqC,KAAK,CAAC;UACxB,IAAIE,EAAE,CAACC,KAAK,EAAE,EAAE;YACZ,MAAM,IAAIjB,KAAK,CAAC,iBAAiB,CAAC;UACtC;UACAO,MAAM,CAACQ,MAAM,GAAGD,KAAK;QACzB,CAAC,MAAM,IAAID,GAAG,KAAK,MAAM,EAAE;UACvB,IAAIN,MAAM,CAACW,IAAI,EAAE;YACb,MAAM,IAAIlB,KAAK,CAAC,kBAAkB,CAAC;UACvC;UACAO,MAAM,CAACW,IAAI,GAAGC,kBAAkB,CAACL,KAAK,CAAC;QAC3C,CAAC,MAAM;UACH,MAAM,IAAId,KAAK,CAAC,kBAAkB,GAAGa,GAAG,CAAC;QAC7C;MACJ;IAAC;MAAA;IAAA;MAAA;IAAA;EACL;EACA,OAAON,MAAM;AACjB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAASa,iBAAiB,CAACf,OAAO,EAAEU,MAAM,EAAEG,IAAI,EAAE;EAC9C,IAAIrB,GAAG,GAAG,iBAAiB,GAAGQ,OAAO;EAErC,IAAMgB,MAAM,GAAG,EAAE;EAEjB,IAAIN,MAAM,EAAE;IACRM,MAAM,CAACC,IAAI,CAAC,SAAS,GAAGP,MAAM,CAAC;EACnC;EACA,IAAIG,IAAI,EAAE;IACNG,MAAM,CAACC,IAAI,CAAC,OAAO,GAAGC,kBAAkB,CAACL,IAAI,CAAC,CAAC;EACnD;EAEA,IAAIG,MAAM,CAAClB,MAAM,KAAK,CAAC,EAAE,OAAON,GAAG;EAEnC,OAAOA,GAAG,GAAG,GAAG,GAAGwB,MAAM,CAACG,IAAI,CAAC,GAAG,CAAC;AACvC;AAEAC,MAAM,CAACC,OAAO,GAAG;EACbhC,OAAO,EAAPA,OAAO;EACPjB,EAAE,EAAFA,EAAE;EACFC,IAAI,EAAJA,IAAI;EACJC,MAAM,EAANA,MAAM;EACNC,QAAQ,EAARA,QAAQ;EACRC,MAAM,EAANA,MAAM;EACNC,UAAU,EAAVA,UAAU;EACVC,UAAU,EAAVA,UAAU;EACVC,aAAa,EAAbA,aAAa;EACbC,MAAM,EAANA,MAAM;EACNC,KAAK,EAALA,KAAK;EACLC,WAAW,EAAXA,WAAW;EACXC,aAAa,EAAbA,aAAa;EACbC,aAAa,EAAbA,aAAa;EACbC,cAAc,EAAdA,cAAc;EACdC,cAAc,EAAdA,cAAc;EACdC,YAAY,EAAZA,YAAY;EACZC,uBAAuB,EAAvBA,uBAAuB;EACvBG,gBAAgB,EAAhBA,gBAAgB;EAChBwB,iBAAiB,EAAjBA;AACJ,CAAC"},"metadata":{},"sourceType":"script"}