{"ast":null,"code":"\"use strict\";\n\nvar _regeneratorRuntime = require(\"/Users/sepezho/Work/tonana/fe/node_modules/@babel/runtime/helpers/regeneratorRuntime.js\").default;\nvar _asyncToGenerator = require(\"/Users/sepezho/Work/tonana/fe/node_modules/@babel/runtime/helpers/asyncToGenerator.js\").default;\nvar _classCallCheck = require(\"/Users/sepezho/Work/tonana/fe/node_modules/@babel/runtime/helpers/classCallCheck.js\").default;\nvar _createClass = require(\"/Users/sepezho/Work/tonana/fe/node_modules/@babel/runtime/helpers/createClass.js\").default;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.WalletContract = void 0;\nvar createWalletTransfer_1 = require(\"./messages/createWalletTransfer\");\nvar contractAddress_1 = require(\"./contractAddress\");\nvar WalletContract = /*#__PURE__*/function () {\n  function WalletContract(client, source, address) {\n    _classCallCheck(this, WalletContract);\n    this.client = client;\n    this.address = address;\n    this.source = source;\n  }\n  _createClass(WalletContract, [{\n    key: \"getSeqNo\",\n    value: function () {\n      var _getSeqNo = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var res;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return this.client.isContractDeployed(this.address);\n              case 2:\n                if (!_context.sent) {\n                  _context.next = 9;\n                  break;\n                }\n                _context.next = 5;\n                return this.client.callGetMethod(this.address, 'seqno');\n              case 5:\n                res = _context.sent;\n                return _context.abrupt(\"return\", parseInt(res.stack[0][1], 16));\n              case 9:\n                return _context.abrupt(\"return\", 0);\n              case 10:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n      function getSeqNo() {\n        return _getSeqNo.apply(this, arguments);\n      }\n      return getSeqNo;\n    }()\n  }, {\n    key: \"createTransfer\",\n    value: function createTransfer(args) {\n      switch (this.source.walletVersion) {\n        case 'v1':\n          return (0, createWalletTransfer_1.createWalletTransferV1)({\n            seqno: args.seqno,\n            sendMode: args.sendMode,\n            secretKey: args.secretKey,\n            order: args.order\n          });\n        case 'v2':\n          return (0, createWalletTransfer_1.createWalletTransferV2)({\n            seqno: args.seqno,\n            sendMode: args.sendMode,\n            secretKey: args.secretKey,\n            order: args.order,\n            timeout: args.timeout\n          });\n        case 'v3':\n          return (0, createWalletTransfer_1.createWalletTransferV3)({\n            seqno: args.seqno,\n            sendMode: args.sendMode,\n            secretKey: args.secretKey,\n            order: args.order,\n            walletId: this.source.walletId,\n            timeout: args.timeout\n          });\n        case 'v4':\n          return (0, createWalletTransfer_1.createWalletTransferV4)({\n            seqno: args.seqno,\n            sendMode: args.sendMode,\n            secretKey: args.secretKey,\n            order: args.order,\n            walletId: this.source.walletId,\n            timeout: args.timeout\n          });\n        default:\n          throw Error('Unknown contract type: ' + this.source.type);\n      }\n    }\n  }], [{\n    key: \"create\",\n    value: function create(client, source) {\n      var address = (0, contractAddress_1.contractAddress)(source);\n      return new WalletContract(client, source, address);\n    }\n  }]);\n  return WalletContract;\n}();\nexports.WalletContract = WalletContract;","map":{"version":3,"names":["Object","defineProperty","exports","value","WalletContract","createWalletTransfer_1","require","contractAddress_1","client","source","address","isContractDeployed","callGetMethod","res","parseInt","stack","args","walletVersion","createWalletTransferV1","seqno","sendMode","secretKey","order","createWalletTransferV2","timeout","createWalletTransferV3","walletId","createWalletTransferV4","Error","type","contractAddress"],"sources":["/Users/sepezho/Work/tonana/fe/node_modules/ton/dist/contracts/WalletContract.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.WalletContract = void 0;\nconst createWalletTransfer_1 = require(\"./messages/createWalletTransfer\");\nconst contractAddress_1 = require(\"./contractAddress\");\nclass WalletContract {\n    constructor(client, source, address) {\n        this.client = client;\n        this.address = address;\n        this.source = source;\n    }\n    static create(client, source) {\n        let address = (0, contractAddress_1.contractAddress)(source);\n        return new WalletContract(client, source, address);\n    }\n    async getSeqNo() {\n        if (await this.client.isContractDeployed(this.address)) {\n            let res = await this.client.callGetMethod(this.address, 'seqno');\n            return parseInt(res.stack[0][1], 16);\n        }\n        else {\n            return 0;\n        }\n    }\n    createTransfer(args) {\n        switch (this.source.walletVersion) {\n            case 'v1':\n                return (0, createWalletTransfer_1.createWalletTransferV1)({ seqno: args.seqno, sendMode: args.sendMode, secretKey: args.secretKey, order: args.order });\n            case 'v2':\n                return (0, createWalletTransfer_1.createWalletTransferV2)({ seqno: args.seqno, sendMode: args.sendMode, secretKey: args.secretKey, order: args.order, timeout: args.timeout });\n            case 'v3':\n                return (0, createWalletTransfer_1.createWalletTransferV3)({ seqno: args.seqno, sendMode: args.sendMode, secretKey: args.secretKey, order: args.order, walletId: this.source.walletId, timeout: args.timeout });\n            case 'v4':\n                return (0, createWalletTransfer_1.createWalletTransferV4)({ seqno: args.seqno, sendMode: args.sendMode, secretKey: args.secretKey, order: args.order, walletId: this.source.walletId, timeout: args.timeout });\n            default:\n                throw Error('Unknown contract type: ' + this.source.type);\n        }\n    }\n}\nexports.WalletContract = WalletContract;\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}