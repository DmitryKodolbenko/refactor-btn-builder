{"ast":null,"code":"\"use strict\";\n\nvar _regeneratorRuntime = require(\"/Users/sepezho/Work/tonana/fe/node_modules/@babel/runtime/helpers/regeneratorRuntime.js\").default;\nvar _createClass = require(\"/Users/sepezho/Work/tonana/fe/node_modules/@babel/runtime/helpers/createClass.js\").default;\nvar _classCallCheck = require(\"/Users/sepezho/Work/tonana/fe/node_modules/@babel/runtime/helpers/classCallCheck.js\").default;\nvar _assertThisInitialized = require(\"/Users/sepezho/Work/tonana/fe/node_modules/@babel/runtime/helpers/assertThisInitialized.js\").default;\nvar _inherits = require(\"/Users/sepezho/Work/tonana/fe/node_modules/@babel/runtime/helpers/inherits.js\").default;\nvar _createSuper = require(\"/Users/sepezho/Work/tonana/fe/node_modules/@babel/runtime/helpers/createSuper.js\").default;\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nvar _a;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ClientNear = void 0;\nvar eventemitter3_1 = __importDefault(require(\"eventemitter3\"));\nvar isomorphic_ws_1 = __importDefault(require(\"isomorphic-ws\"));\nvar near_api_js_1 = require(\"near-api-js\");\nvar AppRequest_1 = require(\"../types/AppRequest\");\nvar ClientMessages_1 = require(\"../types/ClientMessages\");\nvar ServerMessage_1 = require(\"../types/ServerMessage\");\nvar utils_1 = require(\"../utils\");\nvar ClientNear = /*#__PURE__*/function (_eventemitter3_1$defa) {\n  _inherits(ClientNear, _eventemitter3_1$defa);\n  var _super = _createSuper(ClientNear);\n  function ClientNear(ws, sessionId) {\n    var _this;\n    _classCallCheck(this, ClientNear);\n    _this = _super.call(this);\n    _this.events = {};\n    _this.sessionId = '';\n    _this.connect = function (_ref) {\n      var publicKey = _ref.publicKey,\n        sessionId = _ref.sessionId,\n        token = _ref.token,\n        device = _ref.device,\n        accountId = _ref.accountId,\n        notificationEndpoint = _ref.notificationEndpoint;\n      return __awaiter(_assertThisInitialized(_this), void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var request;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                request = (0, ClientMessages_1.createConnectMessage)(Buffer.from(publicKey.data).toString('hex'), sessionId, token, notificationEndpoint, device, JSON.stringify({\n                  accountId: accountId\n                }));\n                _context.next = 3;\n                return this.send(request);\n              case 3:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n    };\n    _this.endSession = function () {\n      return __awaiter(_assertThisInitialized(_this), void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n        var request;\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                request = {\n                  type: ClientMessages_1.ClientMessageTypes.EndSession,\n                  sessionId: this.sessionId\n                };\n                _context2.next = 3;\n                return this.send(request);\n              case 3:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n    };\n    _this.getSessions = function (token) {\n      return __awaiter(_assertThisInitialized(_this), void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {\n        var request;\n        return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                request = {\n                  type: ClientMessages_1.ClientMessageTypes.GetSessions,\n                  token: token\n                };\n                _context3.next = 3;\n                return this.send(request);\n              case 3:\n                return _context3.abrupt(\"return\", _context3.sent);\n              case 4:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n    };\n    _this.getPendingRequests = function () {\n      return __awaiter(_assertThisInitialized(_this), void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee4() {\n        var request;\n        return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                request = {\n                  type: ClientMessages_1.ClientMessageTypes.GetPendingRequests,\n                  sessionId: this.sessionId\n                };\n                _context4.next = 3;\n                return this.send(request);\n              case 3:\n                return _context4.abrupt(\"return\", _context4.sent);\n              case 4:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n    };\n    _this.send = function (message) {\n      return __awaiter(_assertThisInitialized(_this), void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee5() {\n        var _this2 = this;\n        return _regeneratorRuntime().wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                return _context5.abrupt(\"return\", new Promise(function (resolve, reject) {\n                  var id = (0, utils_1.getRandomId)();\n                  var request = JSON.stringify(Object.assign(Object.assign({}, message), {\n                    id: id\n                  }));\n                  _this2.events[id] = function (response) {\n                    if (response.type === ServerMessage_1.ServerMessageTypes.Error) {\n                      reject(response.msg);\n                    } else {\n                      resolve(response);\n                    }\n                  };\n                  _this2.ws.send(request);\n                }));\n              case 1:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5);\n      }));\n    };\n    _this.resolveSignTransaction = function (_ref2) {\n      var requestId = _ref2.requestId,\n        signedTransactions = _ref2.signedTransactions;\n      return __awaiter(_assertThisInitialized(_this), void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee6() {\n        var buffers, request;\n        return _regeneratorRuntime().wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                buffers = signedTransactions.map(function (tx) {\n                  return Buffer.from(tx.encode()).toString('hex');\n                });\n                request = {\n                  type: ClientMessages_1.ClientMessageTypes.ResolveSignTransaction,\n                  sessionId: this.sessionId,\n                  requestId: requestId,\n                  signedTransactions: buffers\n                };\n                return _context6.abrupt(\"return\", this.send(request));\n              case 3:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6, this);\n      }));\n    };\n    _this.resolveSignMessage = function (_ref3) {\n      var requestId = _ref3.requestId,\n        signature = _ref3.signature;\n      return __awaiter(_assertThisInitialized(_this), void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee7() {\n        var request;\n        return _regeneratorRuntime().wrap(function _callee7$(_context7) {\n          while (1) {\n            switch (_context7.prev = _context7.next) {\n              case 0:\n                request = {\n                  type: ClientMessages_1.ClientMessageTypes.ResolveSignMessage,\n                  sessionId: this.sessionId,\n                  requestId: requestId,\n                  signature: Buffer.from(signature).toString('hex')\n                };\n                return _context7.abrupt(\"return\", this.send(request));\n              case 2:\n              case \"end\":\n                return _context7.stop();\n            }\n          }\n        }, _callee7, this);\n      }));\n    };\n    _this.rejectRequest = function (requestId) {\n      return __awaiter(_assertThisInitialized(_this), void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee8() {\n        var request;\n        return _regeneratorRuntime().wrap(function _callee8$(_context8) {\n          while (1) {\n            switch (_context8.prev = _context8.next) {\n              case 0:\n                request = {\n                  type: ClientMessages_1.ClientMessageTypes.RejectRequest,\n                  requestId: requestId\n                };\n                return _context8.abrupt(\"return\", this.send(request));\n              case 2:\n              case \"end\":\n                return _context8.stop();\n            }\n          }\n        }, _callee8, this);\n      }));\n    };\n    _this.ws = ws;\n    _this.sessionId = sessionId;\n    return _this;\n  }\n  return _createClass(ClientNear);\n}(eventemitter3_1.default);\nexports.ClientNear = ClientNear;\n_a = ClientNear;\nClientNear.build = function (_ref4) {\n  var sessionId = _ref4.sessionId,\n    url = _ref4.url;\n  return __awaiter(void 0, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee9() {\n    return _regeneratorRuntime().wrap(function _callee9$(_context9) {\n      while (1) {\n        switch (_context9.prev = _context9.next) {\n          case 0:\n            return _context9.abrupt(\"return\", new Promise(function (resolve, reject) {\n              var ws = url ? new isomorphic_ws_1.default(url) : new isomorphic_ws_1.default('wss://relay.nightly.app/client');\n              var connection = new ClientNear(ws, sessionId);\n              connection.ws.onopen = function () {\n                connection.ws.onmessage = function (_ref5) {\n                  var data = _ref5.data;\n                  var response = JSON.parse(data);\n                  if (response.type === ServerMessage_1.ServerMessageTypes.NewRequestMessage) {\n                    if (response.request.type == AppRequest_1.AppRequest.SignTransaction || response.request.type == AppRequest_1.AppRequest.SignAllTransactions) {\n                      var withDeserialized = Object.assign({\n                        deserialized: response.request.transactions.map(function (hex) {\n                          return near_api_js_1.transactions.Transaction.decode(Buffer.from(hex, 'hex'));\n                        })\n                      }, response.request);\n                      connection.emit('newRequest', withDeserialized);\n                    } else connection.emit('newRequest', response.request);\n                    return;\n                  } else {\n                    connection.events[response.id](response);\n                  }\n                };\n                connection.ws.onclose = function () {\n                  connection.emit('disconnect');\n                };\n                var id = (0, utils_1.getRandomId)();\n                var request = {\n                  id: id,\n                  sessionId: sessionId,\n                  type: ClientMessages_1.ClientMessageTypes.GetInfo\n                };\n                connection.events[id] = function (response) {\n                  if (response.type === ServerMessage_1.ServerMessageTypes.AppData) {\n                    resolve({\n                      client: connection,\n                      data: response\n                    });\n                  } else {\n                    reject(response);\n                  }\n                };\n                connection.ws.send(JSON.stringify(request));\n              };\n            }));\n          case 1:\n          case \"end\":\n            return _context9.stop();\n        }\n      }\n    }, _callee9);\n  }));\n};","map":{"version":3,"names":["__awaiter","thisArg","_arguments","P","generator","adopt","value","resolve","Promise","reject","fulfilled","step","next","e","rejected","result","done","then","apply","__importDefault","mod","__esModule","_a","Object","defineProperty","exports","ClientNear","eventemitter3_1","require","isomorphic_ws_1","near_api_js_1","AppRequest_1","ClientMessages_1","ServerMessage_1","utils_1","ws","sessionId","events","connect","publicKey","token","device","accountId","notificationEndpoint","request","createConnectMessage","Buffer","from","data","toString","JSON","stringify","send","endSession","type","ClientMessageTypes","EndSession","getSessions","GetSessions","getPendingRequests","GetPendingRequests","message","id","getRandomId","assign","response","ServerMessageTypes","Error","msg","resolveSignTransaction","requestId","signedTransactions","buffers","map","tx","encode","ResolveSignTransaction","resolveSignMessage","signature","ResolveSignMessage","rejectRequest","RejectRequest","default","build","url","connection","onopen","onmessage","parse","NewRequestMessage","AppRequest","SignTransaction","SignAllTransactions","withDeserialized","deserialized","transactions","hex","Transaction","decode","emit","onclose","GetInfo","AppData","client"],"sources":["/Users/sepezho/Work/tonana/fe/node_modules/@nightlylabs/connect-near/lib/nightlyConnect/connect/sdk/src/near/clientNear.js"],"sourcesContent":["\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nvar _a;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ClientNear = void 0;\nconst eventemitter3_1 = __importDefault(require(\"eventemitter3\"));\nconst isomorphic_ws_1 = __importDefault(require(\"isomorphic-ws\"));\nconst near_api_js_1 = require(\"near-api-js\");\nconst AppRequest_1 = require(\"../types/AppRequest\");\nconst ClientMessages_1 = require(\"../types/ClientMessages\");\nconst ServerMessage_1 = require(\"../types/ServerMessage\");\nconst utils_1 = require(\"../utils\");\nclass ClientNear extends eventemitter3_1.default {\n    constructor(ws, sessionId) {\n        super();\n        this.events = {};\n        this.sessionId = '';\n        this.connect = ({ publicKey, sessionId, token, device, accountId, notificationEndpoint }) => __awaiter(this, void 0, void 0, function* () {\n            const request = (0, ClientMessages_1.createConnectMessage)(Buffer.from(publicKey.data).toString('hex'), sessionId, token, notificationEndpoint, device, JSON.stringify({ accountId: accountId }));\n            yield this.send(request);\n        });\n        this.endSession = () => __awaiter(this, void 0, void 0, function* () {\n            const request = {\n                type: ClientMessages_1.ClientMessageTypes.EndSession,\n                sessionId: this.sessionId\n            };\n            yield this.send(request);\n        });\n        this.getSessions = (token) => __awaiter(this, void 0, void 0, function* () {\n            const request = {\n                type: ClientMessages_1.ClientMessageTypes.GetSessions,\n                token\n            };\n            return (yield this.send(request));\n        });\n        this.getPendingRequests = () => __awaiter(this, void 0, void 0, function* () {\n            const request = {\n                type: ClientMessages_1.ClientMessageTypes.GetPendingRequests,\n                sessionId: this.sessionId\n            };\n            return (yield this.send(request));\n        });\n        this.send = (message) => __awaiter(this, void 0, void 0, function* () {\n            return new Promise((resolve, reject) => {\n                const id = (0, utils_1.getRandomId)();\n                const request = JSON.stringify(Object.assign(Object.assign({}, message), { id: id }));\n                this.events[id] = (response) => {\n                    if (response.type === ServerMessage_1.ServerMessageTypes.Error) {\n                        reject(response.msg);\n                    }\n                    else {\n                        resolve(response);\n                    }\n                };\n                this.ws.send(request);\n            });\n        });\n        this.resolveSignTransaction = ({ requestId, signedTransactions }) => __awaiter(this, void 0, void 0, function* () {\n            const buffers = signedTransactions.map((tx) => Buffer.from(tx.encode()).toString('hex'));\n            const request = {\n                type: ClientMessages_1.ClientMessageTypes.ResolveSignTransaction,\n                sessionId: this.sessionId,\n                requestId,\n                signedTransactions: buffers\n            };\n            return this.send(request);\n        });\n        this.resolveSignMessage = ({ requestId, signature }) => __awaiter(this, void 0, void 0, function* () {\n            const request = {\n                type: ClientMessages_1.ClientMessageTypes.ResolveSignMessage,\n                sessionId: this.sessionId,\n                requestId,\n                signature: Buffer.from(signature).toString('hex')\n            };\n            return this.send(request);\n        });\n        this.rejectRequest = (requestId) => __awaiter(this, void 0, void 0, function* () {\n            const request = {\n                type: ClientMessages_1.ClientMessageTypes.RejectRequest,\n                requestId\n            };\n            return this.send(request);\n        });\n        this.ws = ws;\n        this.sessionId = sessionId;\n    }\n}\nexports.ClientNear = ClientNear;\n_a = ClientNear;\nClientNear.build = ({ sessionId, url }) => __awaiter(void 0, void 0, void 0, function* () {\n    return new Promise((resolve, reject) => {\n        const ws = url ? new isomorphic_ws_1.default(url) : new isomorphic_ws_1.default('wss://relay.nightly.app/client');\n        const connection = new ClientNear(ws, sessionId);\n        connection.ws.onopen = () => {\n            connection.ws.onmessage = ({ data }) => {\n                const response = JSON.parse(data);\n                if (response.type === ServerMessage_1.ServerMessageTypes.NewRequestMessage) {\n                    if (response.request.type == AppRequest_1.AppRequest.SignTransaction ||\n                        response.request.type == AppRequest_1.AppRequest.SignAllTransactions) {\n                        const withDeserialized = Object.assign({ deserialized: response.request.transactions.map((hex) => near_api_js_1.transactions.Transaction.decode(Buffer.from(hex, 'hex'))) }, response.request);\n                        connection.emit('newRequest', withDeserialized);\n                    }\n                    else\n                        connection.emit('newRequest', response.request);\n                    return;\n                }\n                else {\n                    connection.events[response.id](response);\n                }\n            };\n            connection.ws.onclose = () => {\n                connection.emit('disconnect');\n            };\n            const id = (0, utils_1.getRandomId)();\n            const request = { id, sessionId, type: ClientMessages_1.ClientMessageTypes.GetInfo };\n            connection.events[id] = (response) => {\n                if (response.type === ServerMessage_1.ServerMessageTypes.AppData) {\n                    resolve({ client: connection, data: response });\n                }\n                else {\n                    reject(response);\n                }\n            };\n            connection.ws.send(JSON.stringify(request));\n        };\n    });\n});\n"],"mappings":"AAAA,YAAY;;AAAC;AAAA;AAAA;AAAA;AAAA;AAAA;AACb,IAAIA,SAAS,GAAI,IAAI,IAAI,IAAI,CAACA,SAAS,IAAK,UAAUC,OAAO,EAAEC,UAAU,EAAEC,CAAC,EAAEC,SAAS,EAAE;EACrF,SAASC,KAAK,CAACC,KAAK,EAAE;IAAE,OAAOA,KAAK,YAAYH,CAAC,GAAGG,KAAK,GAAG,IAAIH,CAAC,CAAC,UAAUI,OAAO,EAAE;MAAEA,OAAO,CAACD,KAAK,CAAC;IAAE,CAAC,CAAC;EAAE;EAC3G,OAAO,KAAKH,CAAC,KAAKA,CAAC,GAAGK,OAAO,CAAC,EAAE,UAAUD,OAAO,EAAEE,MAAM,EAAE;IACvD,SAASC,SAAS,CAACJ,KAAK,EAAE;MAAE,IAAI;QAAEK,IAAI,CAACP,SAAS,CAACQ,IAAI,CAACN,KAAK,CAAC,CAAC;MAAE,CAAC,CAAC,OAAOO,CAAC,EAAE;QAAEJ,MAAM,CAACI,CAAC,CAAC;MAAE;IAAE;IAC1F,SAASC,QAAQ,CAACR,KAAK,EAAE;MAAE,IAAI;QAAEK,IAAI,CAACP,SAAS,CAAC,OAAO,CAAC,CAACE,KAAK,CAAC,CAAC;MAAE,CAAC,CAAC,OAAOO,CAAC,EAAE;QAAEJ,MAAM,CAACI,CAAC,CAAC;MAAE;IAAE;IAC7F,SAASF,IAAI,CAACI,MAAM,EAAE;MAAEA,MAAM,CAACC,IAAI,GAAGT,OAAO,CAACQ,MAAM,CAACT,KAAK,CAAC,GAAGD,KAAK,CAACU,MAAM,CAACT,KAAK,CAAC,CAACW,IAAI,CAACP,SAAS,EAAEI,QAAQ,CAAC;IAAE;IAC7GH,IAAI,CAAC,CAACP,SAAS,GAAGA,SAAS,CAACc,KAAK,CAACjB,OAAO,EAAEC,UAAU,IAAI,EAAE,CAAC,EAAEU,IAAI,EAAE,CAAC;EACzE,CAAC,CAAC;AACN,CAAC;AACD,IAAIO,eAAe,GAAI,IAAI,IAAI,IAAI,CAACA,eAAe,IAAK,UAAUC,GAAG,EAAE;EACnE,OAAQA,GAAG,IAAIA,GAAG,CAACC,UAAU,GAAID,GAAG,GAAG;IAAE,SAAS,EAAEA;EAAI,CAAC;AAC7D,CAAC;AACD,IAAIE,EAAE;AACNC,MAAM,CAACC,cAAc,CAACC,OAAO,EAAE,YAAY,EAAE;EAAEnB,KAAK,EAAE;AAAK,CAAC,CAAC;AAC7DmB,OAAO,CAACC,UAAU,GAAG,KAAK,CAAC;AAC3B,IAAMC,eAAe,GAAGR,eAAe,CAACS,OAAO,CAAC,eAAe,CAAC,CAAC;AACjE,IAAMC,eAAe,GAAGV,eAAe,CAACS,OAAO,CAAC,eAAe,CAAC,CAAC;AACjE,IAAME,aAAa,GAAGF,OAAO,CAAC,aAAa,CAAC;AAC5C,IAAMG,YAAY,GAAGH,OAAO,CAAC,qBAAqB,CAAC;AACnD,IAAMI,gBAAgB,GAAGJ,OAAO,CAAC,yBAAyB,CAAC;AAC3D,IAAMK,eAAe,GAAGL,OAAO,CAAC,wBAAwB,CAAC;AACzD,IAAMM,OAAO,GAAGN,OAAO,CAAC,UAAU,CAAC;AAAC,IAC9BF,UAAU;EAAA;EAAA;EACZ,oBAAYS,EAAE,EAAEC,SAAS,EAAE;IAAA;IAAA;IACvB;IACA,MAAKC,MAAM,GAAG,CAAC,CAAC;IAChB,MAAKD,SAAS,GAAG,EAAE;IACnB,MAAKE,OAAO,GAAG;MAAA,IAAGC,SAAS,QAATA,SAAS;QAAEH,SAAS,QAATA,SAAS;QAAEI,KAAK,QAALA,KAAK;QAAEC,MAAM,QAANA,MAAM;QAAEC,SAAS,QAATA,SAAS;QAAEC,oBAAoB,QAApBA,oBAAoB;MAAA,OAAO3C,SAAS,gCAAO,KAAK,CAAC,EAAE,KAAK,CAAC,0CAAE;QAAA;QAAA;UAAA;YAAA;cAAA;gBACnH4C,OAAO,GAAG,CAAC,CAAC,EAAEZ,gBAAgB,CAACa,oBAAoB,EAAEC,MAAM,CAACC,IAAI,CAACR,SAAS,CAACS,IAAI,CAAC,CAACC,QAAQ,CAAC,KAAK,CAAC,EAAEb,SAAS,EAAEI,KAAK,EAAEG,oBAAoB,EAAEF,MAAM,EAAES,IAAI,CAACC,SAAS,CAAC;kBAAET,SAAS,EAAEA;gBAAU,CAAC,CAAC,CAAC;gBAAA;gBACjM,OAAM,IAAI,CAACU,IAAI,CAACR,OAAO,CAAC;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA,CAC3B,EAAC;IAAA;IACF,MAAKS,UAAU,GAAG;MAAA,OAAMrD,SAAS,gCAAO,KAAK,CAAC,EAAE,KAAK,CAAC,0CAAE;QAAA;QAAA;UAAA;YAAA;cAAA;gBAC9C4C,OAAO,GAAG;kBACZU,IAAI,EAAEtB,gBAAgB,CAACuB,kBAAkB,CAACC,UAAU;kBACpDpB,SAAS,EAAE,IAAI,CAACA;gBACpB,CAAC;gBAAA;gBACD,OAAM,IAAI,CAACgB,IAAI,CAACR,OAAO,CAAC;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA,CAC3B,EAAC;IAAA;IACF,MAAKa,WAAW,GAAG,UAACjB,KAAK;MAAA,OAAKxC,SAAS,gCAAO,KAAK,CAAC,EAAE,KAAK,CAAC,0CAAE;QAAA;QAAA;UAAA;YAAA;cAAA;gBACpD4C,OAAO,GAAG;kBACZU,IAAI,EAAEtB,gBAAgB,CAACuB,kBAAkB,CAACG,WAAW;kBACrDlB,KAAK,EAALA;gBACJ,CAAC;gBAAA;gBACO,OAAM,IAAI,CAACY,IAAI,CAACR,OAAO,CAAC;cAAA;gBAAA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA,CACnC,EAAC;IAAA;IACF,MAAKe,kBAAkB,GAAG;MAAA,OAAM3D,SAAS,gCAAO,KAAK,CAAC,EAAE,KAAK,CAAC,0CAAE;QAAA;QAAA;UAAA;YAAA;cAAA;gBACtD4C,OAAO,GAAG;kBACZU,IAAI,EAAEtB,gBAAgB,CAACuB,kBAAkB,CAACK,kBAAkB;kBAC5DxB,SAAS,EAAE,IAAI,CAACA;gBACpB,CAAC;gBAAA;gBACO,OAAM,IAAI,CAACgB,IAAI,CAACR,OAAO,CAAC;cAAA;gBAAA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA,CACnC,EAAC;IAAA;IACF,MAAKQ,IAAI,GAAG,UAACS,OAAO;MAAA,OAAK7D,SAAS,gCAAO,KAAK,CAAC,EAAE,KAAK,CAAC,0CAAE;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA,kCAC9C,IAAIQ,OAAO,CAAC,UAACD,OAAO,EAAEE,MAAM,EAAK;kBACpC,IAAMqD,EAAE,GAAG,CAAC,CAAC,EAAE5B,OAAO,CAAC6B,WAAW,GAAG;kBACrC,IAAMnB,OAAO,GAAGM,IAAI,CAACC,SAAS,CAAC5B,MAAM,CAACyC,MAAM,CAACzC,MAAM,CAACyC,MAAM,CAAC,CAAC,CAAC,EAAEH,OAAO,CAAC,EAAE;oBAAEC,EAAE,EAAEA;kBAAG,CAAC,CAAC,CAAC;kBACrF,MAAI,CAACzB,MAAM,CAACyB,EAAE,CAAC,GAAG,UAACG,QAAQ,EAAK;oBAC5B,IAAIA,QAAQ,CAACX,IAAI,KAAKrB,eAAe,CAACiC,kBAAkB,CAACC,KAAK,EAAE;sBAC5D1D,MAAM,CAACwD,QAAQ,CAACG,GAAG,CAAC;oBACxB,CAAC,MACI;sBACD7D,OAAO,CAAC0D,QAAQ,CAAC;oBACrB;kBACJ,CAAC;kBACD,MAAI,CAAC9B,EAAE,CAACiB,IAAI,CAACR,OAAO,CAAC;gBACzB,CAAC,CAAC;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA,CACL,EAAC;IAAA;IACF,MAAKyB,sBAAsB,GAAG;MAAA,IAAGC,SAAS,SAATA,SAAS;QAAEC,kBAAkB,SAAlBA,kBAAkB;MAAA,OAAOvE,SAAS,gCAAO,KAAK,CAAC,EAAE,KAAK,CAAC,0CAAE;QAAA;QAAA;UAAA;YAAA;cAAA;gBAC3FwE,OAAO,GAAGD,kBAAkB,CAACE,GAAG,CAAC,UAACC,EAAE;kBAAA,OAAK5B,MAAM,CAACC,IAAI,CAAC2B,EAAE,CAACC,MAAM,EAAE,CAAC,CAAC1B,QAAQ,CAAC,KAAK,CAAC;gBAAA,EAAC;gBAClFL,OAAO,GAAG;kBACZU,IAAI,EAAEtB,gBAAgB,CAACuB,kBAAkB,CAACqB,sBAAsB;kBAChExC,SAAS,EAAE,IAAI,CAACA,SAAS;kBACzBkC,SAAS,EAATA,SAAS;kBACTC,kBAAkB,EAAEC;gBACxB,CAAC;gBAAA,kCACM,IAAI,CAACpB,IAAI,CAACR,OAAO,CAAC;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA,CAC5B,EAAC;IAAA;IACF,MAAKiC,kBAAkB,GAAG;MAAA,IAAGP,SAAS,SAATA,SAAS;QAAEQ,SAAS,SAATA,SAAS;MAAA,OAAO9E,SAAS,gCAAO,KAAK,CAAC,EAAE,KAAK,CAAC,0CAAE;QAAA;QAAA;UAAA;YAAA;cAAA;gBAC9E4C,OAAO,GAAG;kBACZU,IAAI,EAAEtB,gBAAgB,CAACuB,kBAAkB,CAACwB,kBAAkB;kBAC5D3C,SAAS,EAAE,IAAI,CAACA,SAAS;kBACzBkC,SAAS,EAATA,SAAS;kBACTQ,SAAS,EAAEhC,MAAM,CAACC,IAAI,CAAC+B,SAAS,CAAC,CAAC7B,QAAQ,CAAC,KAAK;gBACpD,CAAC;gBAAA,kCACM,IAAI,CAACG,IAAI,CAACR,OAAO,CAAC;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA,CAC5B,EAAC;IAAA;IACF,MAAKoC,aAAa,GAAG,UAACV,SAAS;MAAA,OAAKtE,SAAS,gCAAO,KAAK,CAAC,EAAE,KAAK,CAAC,0CAAE;QAAA;QAAA;UAAA;YAAA;cAAA;gBAC1D4C,OAAO,GAAG;kBACZU,IAAI,EAAEtB,gBAAgB,CAACuB,kBAAkB,CAAC0B,aAAa;kBACvDX,SAAS,EAATA;gBACJ,CAAC;gBAAA,kCACM,IAAI,CAAClB,IAAI,CAACR,OAAO,CAAC;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA,CAC5B,EAAC;IAAA;IACF,MAAKT,EAAE,GAAGA,EAAE;IACZ,MAAKC,SAAS,GAAGA,SAAS;IAAC;EAC/B;EAAC;AAAA,EAzEoBT,eAAe,CAACuD,OAAO;AA2EhDzD,OAAO,CAACC,UAAU,GAAGA,UAAU;AAC/BJ,EAAE,GAAGI,UAAU;AACfA,UAAU,CAACyD,KAAK,GAAG;EAAA,IAAG/C,SAAS,SAATA,SAAS;IAAEgD,GAAG,SAAHA,GAAG;EAAA,OAAOpF,SAAS,CAAC,KAAK,CAAC,EAAE,KAAK,CAAC,EAAE,KAAK,CAAC,0CAAE;IAAA;MAAA;QAAA;UAAA;YAAA,kCAClE,IAAIQ,OAAO,CAAC,UAACD,OAAO,EAAEE,MAAM,EAAK;cACpC,IAAM0B,EAAE,GAAGiD,GAAG,GAAG,IAAIvD,eAAe,CAACqD,OAAO,CAACE,GAAG,CAAC,GAAG,IAAIvD,eAAe,CAACqD,OAAO,CAAC,gCAAgC,CAAC;cACjH,IAAMG,UAAU,GAAG,IAAI3D,UAAU,CAACS,EAAE,EAAEC,SAAS,CAAC;cAChDiD,UAAU,CAAClD,EAAE,CAACmD,MAAM,GAAG,YAAM;gBACzBD,UAAU,CAAClD,EAAE,CAACoD,SAAS,GAAG,iBAAc;kBAAA,IAAXvC,IAAI,SAAJA,IAAI;kBAC7B,IAAMiB,QAAQ,GAAGf,IAAI,CAACsC,KAAK,CAACxC,IAAI,CAAC;kBACjC,IAAIiB,QAAQ,CAACX,IAAI,KAAKrB,eAAe,CAACiC,kBAAkB,CAACuB,iBAAiB,EAAE;oBACxE,IAAIxB,QAAQ,CAACrB,OAAO,CAACU,IAAI,IAAIvB,YAAY,CAAC2D,UAAU,CAACC,eAAe,IAChE1B,QAAQ,CAACrB,OAAO,CAACU,IAAI,IAAIvB,YAAY,CAAC2D,UAAU,CAACE,mBAAmB,EAAE;sBACtE,IAAMC,gBAAgB,GAAGtE,MAAM,CAACyC,MAAM,CAAC;wBAAE8B,YAAY,EAAE7B,QAAQ,CAACrB,OAAO,CAACmD,YAAY,CAACtB,GAAG,CAAC,UAACuB,GAAG;0BAAA,OAAKlE,aAAa,CAACiE,YAAY,CAACE,WAAW,CAACC,MAAM,CAACpD,MAAM,CAACC,IAAI,CAACiD,GAAG,EAAE,KAAK,CAAC,CAAC;wBAAA;sBAAE,CAAC,EAAE/B,QAAQ,CAACrB,OAAO,CAAC;sBAC9LyC,UAAU,CAACc,IAAI,CAAC,YAAY,EAAEN,gBAAgB,CAAC;oBACnD,CAAC,MAEGR,UAAU,CAACc,IAAI,CAAC,YAAY,EAAElC,QAAQ,CAACrB,OAAO,CAAC;oBACnD;kBACJ,CAAC,MACI;oBACDyC,UAAU,CAAChD,MAAM,CAAC4B,QAAQ,CAACH,EAAE,CAAC,CAACG,QAAQ,CAAC;kBAC5C;gBACJ,CAAC;gBACDoB,UAAU,CAAClD,EAAE,CAACiE,OAAO,GAAG,YAAM;kBAC1Bf,UAAU,CAACc,IAAI,CAAC,YAAY,CAAC;gBACjC,CAAC;gBACD,IAAMrC,EAAE,GAAG,CAAC,CAAC,EAAE5B,OAAO,CAAC6B,WAAW,GAAG;gBACrC,IAAMnB,OAAO,GAAG;kBAAEkB,EAAE,EAAFA,EAAE;kBAAE1B,SAAS,EAATA,SAAS;kBAAEkB,IAAI,EAAEtB,gBAAgB,CAACuB,kBAAkB,CAAC8C;gBAAQ,CAAC;gBACpFhB,UAAU,CAAChD,MAAM,CAACyB,EAAE,CAAC,GAAG,UAACG,QAAQ,EAAK;kBAClC,IAAIA,QAAQ,CAACX,IAAI,KAAKrB,eAAe,CAACiC,kBAAkB,CAACoC,OAAO,EAAE;oBAC9D/F,OAAO,CAAC;sBAAEgG,MAAM,EAAElB,UAAU;sBAAErC,IAAI,EAAEiB;oBAAS,CAAC,CAAC;kBACnD,CAAC,MACI;oBACDxD,MAAM,CAACwD,QAAQ,CAAC;kBACpB;gBACJ,CAAC;gBACDoB,UAAU,CAAClD,EAAE,CAACiB,IAAI,CAACF,IAAI,CAACC,SAAS,CAACP,OAAO,CAAC,CAAC;cAC/C,CAAC;YACL,CAAC,CAAC;UAAA;UAAA;YAAA;QAAA;MAAA;IAAA;EAAA,CACL,EAAC;AAAA"},"metadata":{},"sourceType":"script"}