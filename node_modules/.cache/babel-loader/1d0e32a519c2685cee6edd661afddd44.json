{"ast":null,"code":"\"use strict\";\n\nvar _objectSpread = require(\"/Users/sepezho/Work/tonana/fe/node_modules/@babel/runtime/helpers/objectSpread2.js\").default;\nvar _regeneratorRuntime = require(\"/Users/sepezho/Work/tonana/fe/node_modules/@babel/runtime/helpers/regeneratorRuntime.js\").default;\nvar _asyncToGenerator = require(\"/Users/sepezho/Work/tonana/fe/node_modules/@babel/runtime/helpers/asyncToGenerator.js\").default;\nvar _classCallCheck = require(\"/Users/sepezho/Work/tonana/fe/node_modules/@babel/runtime/helpers/classCallCheck.js\").default;\nvar _createClass = require(\"/Users/sepezho/Work/tonana/fe/node_modules/@babel/runtime/helpers/createClass.js\").default;\nvar _defineProperty = require(\"/Users/sepezho/Work/tonana/fe/node_modules/@babel/runtime/helpers/defineProperty.js\").default;\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Contract = void 0;\nvar bn_js_1 = __importDefault(require(\"bn.js\"));\nvar depd_1 = __importDefault(require(\"depd\"));\nvar providers_1 = require(\"./providers\");\nvar errors_1 = require(\"./utils/errors\");\n// Makes `function.name` return given name\nfunction nameFunction(name, body) {\n  return _defineProperty({}, name, function () {\n    return body.apply(void 0, arguments);\n  })[name];\n}\nvar isUint8Array = function isUint8Array(x) {\n  return x && x.byteLength !== undefined && x.byteLength === x.length;\n};\nvar isObject = function isObject(x) {\n  return Object.prototype.toString.call(x) === '[object Object]';\n};\n/**\n * Defines a smart contract on NEAR including the change (mutable) and view (non-mutable) methods\n *\n * @example {@link https://docs.near.org/docs/develop/front-end/naj-quick-reference#contract}\n * @example\n * ```js\n * import { Contract } from 'near-api-js';\n *\n * async function contractExample() {\n *   const methodOptions = {\n *     viewMethods: ['getMessageByAccountId'],\n *     changeMethods: ['addMessage']\n *   };\n *   const contract = new Contract(\n *     wallet.account(),\n *     'contract-id.testnet',\n *     methodOptions\n *   );\n *\n *   // use a contract view method\n *   const messages = await contract.getMessages({\n *     accountId: 'example-account.testnet'\n *   });\n *\n *   // use a contract change method\n *   await contract.addMessage({\n *      meta: 'some info',\n *      callbackUrl: 'https://example.com/callback',\n *      args: { text: 'my message' },\n *      amount: 1\n *   })\n * }\n * ```\n */\nvar Contract = /*#__PURE__*/function () {\n  /**\n   * @param account NEAR account to sign change method transactions\n   * @param contractId NEAR account id where the contract is deployed\n   * @param options NEAR smart contract methods that your application will use. These will be available as `contract.methodName`\n   */\n  function Contract(account, contractId, options) {\n    var _this = this;\n    _classCallCheck(this, Contract);\n    this.account = account;\n    this.contractId = contractId;\n    var _options$viewMethods = options.viewMethods,\n      viewMethods = _options$viewMethods === void 0 ? [] : _options$viewMethods,\n      _options$changeMethod = options.changeMethods,\n      changeMethods = _options$changeMethod === void 0 ? [] : _options$changeMethod;\n    viewMethods.forEach(function (methodName) {\n      Object.defineProperty(_this, methodName, {\n        writable: false,\n        enumerable: true,\n        value: nameFunction(methodName, /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n          var args,\n            options,\n            _args = arguments;\n          return _regeneratorRuntime().wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  args = _args.length > 0 && _args[0] !== undefined ? _args[0] : {};\n                  options = _args.length > 1 && _args[1] !== undefined ? _args[1] : {};\n                  if (!((_args.length <= 2 ? 0 : _args.length - 2) || !(isObject(args) || isUint8Array(args)) || !isObject(options))) {\n                    _context.next = 4;\n                    break;\n                  }\n                  throw new errors_1.PositionalArgsError();\n                case 4:\n                  return _context.abrupt(\"return\", _this.account.viewFunction(_this.contractId, methodName, args, options));\n                case 5:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, _callee);\n        })))\n      });\n    });\n    changeMethods.forEach(function (methodName) {\n      Object.defineProperty(_this, methodName, {\n        writable: false,\n        enumerable: true,\n        value: nameFunction(methodName, /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n          var _len,\n            args,\n            _key,\n            deprecate,\n            _args2 = arguments;\n          return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n            while (1) {\n              switch (_context2.prev = _context2.next) {\n                case 0:\n                  for (_len = _args2.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n                    args[_key] = _args2[_key];\n                  }\n                  if (!(args.length && (args.length > 3 || !(isObject(args[0]) || isUint8Array(args[0]))))) {\n                    _context2.next = 3;\n                    break;\n                  }\n                  throw new errors_1.PositionalArgsError();\n                case 3:\n                  if (!(args.length > 1 || !(args[0] && args[0].args))) {\n                    _context2.next = 7;\n                    break;\n                  }\n                  deprecate = depd_1.default('contract.methodName(args, gas, amount)');\n                  deprecate('use `contract.methodName({ args, gas?, amount?, callbackUrl?, meta? })` instead');\n                  return _context2.abrupt(\"return\", _this._changeMethod({\n                    methodName: methodName,\n                    args: args[0],\n                    gas: args[1],\n                    amount: args[2]\n                  }));\n                case 7:\n                  return _context2.abrupt(\"return\", _this._changeMethod(_objectSpread({\n                    methodName: methodName\n                  }, args[0])));\n                case 8:\n                case \"end\":\n                  return _context2.stop();\n              }\n            }\n          }, _callee2);\n        })))\n      });\n    });\n  }\n  _createClass(Contract, [{\n    key: \"_changeMethod\",\n    value: function () {\n      var _changeMethod2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3(_ref3) {\n        var args, methodName, gas, amount, meta, callbackUrl, rawResult;\n        return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                args = _ref3.args, methodName = _ref3.methodName, gas = _ref3.gas, amount = _ref3.amount, meta = _ref3.meta, callbackUrl = _ref3.callbackUrl;\n                validateBNLike({\n                  gas: gas,\n                  amount: amount\n                });\n                _context3.next = 4;\n                return this.account.functionCall({\n                  contractId: this.contractId,\n                  methodName: methodName,\n                  args: args,\n                  gas: gas,\n                  attachedDeposit: amount,\n                  walletMeta: meta,\n                  walletCallbackUrl: callbackUrl\n                });\n              case 4:\n                rawResult = _context3.sent;\n                return _context3.abrupt(\"return\", providers_1.getTransactionLastResult(rawResult));\n              case 6:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n      function _changeMethod(_x) {\n        return _changeMethod2.apply(this, arguments);\n      }\n      return _changeMethod;\n    }()\n  }]);\n  return Contract;\n}();\nexports.Contract = Contract;\n/**\n * Validation on arguments being a big number from bn.js\n * Throws if an argument is not in BN format or otherwise invalid\n * @param argMap\n */\nfunction validateBNLike(argMap) {\n  var bnLike = 'number, decimal string or BN';\n  for (var _i = 0, _Object$keys = Object.keys(argMap); _i < _Object$keys.length; _i++) {\n    var argName = _Object$keys[_i];\n    var argValue = argMap[argName];\n    if (argValue && !bn_js_1.default.isBN(argValue) && isNaN(argValue)) {\n      throw new errors_1.ArgumentTypeError(argName, bnLike, argValue);\n    }\n  }\n}","map":{"version":3,"names":["__importDefault","mod","__esModule","Object","defineProperty","exports","value","Contract","bn_js_1","require","depd_1","providers_1","errors_1","nameFunction","name","body","isUint8Array","x","byteLength","undefined","length","isObject","prototype","toString","call","account","contractId","options","viewMethods","changeMethods","forEach","methodName","writable","enumerable","args","PositionalArgsError","viewFunction","deprecate","default","_changeMethod","gas","amount","meta","callbackUrl","validateBNLike","functionCall","attachedDeposit","walletMeta","walletCallbackUrl","rawResult","getTransactionLastResult","argMap","bnLike","keys","argName","argValue","isBN","isNaN","ArgumentTypeError"],"sources":["/Users/sepezho/Work/tonana/fe/node_modules/@nightlylabs/connect-near/node_modules/near-api-js/lib/contract.js"],"sourcesContent":["\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Contract = void 0;\nconst bn_js_1 = __importDefault(require(\"bn.js\"));\nconst depd_1 = __importDefault(require(\"depd\"));\nconst providers_1 = require(\"./providers\");\nconst errors_1 = require(\"./utils/errors\");\n// Makes `function.name` return given name\nfunction nameFunction(name, body) {\n    return {\n        [name](...args) {\n            return body(...args);\n        }\n    }[name];\n}\nconst isUint8Array = (x) => x && x.byteLength !== undefined && x.byteLength === x.length;\nconst isObject = (x) => Object.prototype.toString.call(x) === '[object Object]';\n/**\n * Defines a smart contract on NEAR including the change (mutable) and view (non-mutable) methods\n *\n * @example {@link https://docs.near.org/docs/develop/front-end/naj-quick-reference#contract}\n * @example\n * ```js\n * import { Contract } from 'near-api-js';\n *\n * async function contractExample() {\n *   const methodOptions = {\n *     viewMethods: ['getMessageByAccountId'],\n *     changeMethods: ['addMessage']\n *   };\n *   const contract = new Contract(\n *     wallet.account(),\n *     'contract-id.testnet',\n *     methodOptions\n *   );\n *\n *   // use a contract view method\n *   const messages = await contract.getMessages({\n *     accountId: 'example-account.testnet'\n *   });\n *\n *   // use a contract change method\n *   await contract.addMessage({\n *      meta: 'some info',\n *      callbackUrl: 'https://example.com/callback',\n *      args: { text: 'my message' },\n *      amount: 1\n *   })\n * }\n * ```\n */\nclass Contract {\n    /**\n     * @param account NEAR account to sign change method transactions\n     * @param contractId NEAR account id where the contract is deployed\n     * @param options NEAR smart contract methods that your application will use. These will be available as `contract.methodName`\n     */\n    constructor(account, contractId, options) {\n        this.account = account;\n        this.contractId = contractId;\n        const { viewMethods = [], changeMethods = [] } = options;\n        viewMethods.forEach((methodName) => {\n            Object.defineProperty(this, methodName, {\n                writable: false,\n                enumerable: true,\n                value: nameFunction(methodName, async (args = {}, options = {}, ...ignored) => {\n                    if (ignored.length || !(isObject(args) || isUint8Array(args)) || !isObject(options)) {\n                        throw new errors_1.PositionalArgsError();\n                    }\n                    return this.account.viewFunction(this.contractId, methodName, args, options);\n                })\n            });\n        });\n        changeMethods.forEach((methodName) => {\n            Object.defineProperty(this, methodName, {\n                writable: false,\n                enumerable: true,\n                value: nameFunction(methodName, async (...args) => {\n                    if (args.length && (args.length > 3 || !(isObject(args[0]) || isUint8Array(args[0])))) {\n                        throw new errors_1.PositionalArgsError();\n                    }\n                    if (args.length > 1 || !(args[0] && args[0].args)) {\n                        const deprecate = depd_1.default('contract.methodName(args, gas, amount)');\n                        deprecate('use `contract.methodName({ args, gas?, amount?, callbackUrl?, meta? })` instead');\n                        return this._changeMethod({\n                            methodName,\n                            args: args[0],\n                            gas: args[1],\n                            amount: args[2]\n                        });\n                    }\n                    return this._changeMethod({ methodName, ...args[0] });\n                })\n            });\n        });\n    }\n    async _changeMethod({ args, methodName, gas, amount, meta, callbackUrl }) {\n        validateBNLike({ gas, amount });\n        const rawResult = await this.account.functionCall({\n            contractId: this.contractId,\n            methodName,\n            args,\n            gas,\n            attachedDeposit: amount,\n            walletMeta: meta,\n            walletCallbackUrl: callbackUrl\n        });\n        return providers_1.getTransactionLastResult(rawResult);\n    }\n}\nexports.Contract = Contract;\n/**\n * Validation on arguments being a big number from bn.js\n * Throws if an argument is not in BN format or otherwise invalid\n * @param argMap\n */\nfunction validateBNLike(argMap) {\n    const bnLike = 'number, decimal string or BN';\n    for (const argName of Object.keys(argMap)) {\n        const argValue = argMap[argName];\n        if (argValue && !bn_js_1.default.isBN(argValue) && isNaN(argValue)) {\n            throw new errors_1.ArgumentTypeError(argName, bnLike, argValue);\n        }\n    }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}