{"ast":null,"code":"var _classCallCheck = require(\"/Users/sepezho/Work/tonana/fe/node_modules/@babel/runtime/helpers/classCallCheck.js\").default;\nvar _createClass = require(\"/Users/sepezho/Work/tonana/fe/node_modules/@babel/runtime/helpers/createClass.js\").default;\nvar _inherits = require(\"/Users/sepezho/Work/tonana/fe/node_modules/@babel/runtime/helpers/inherits.js\").default;\nvar _createSuper = require(\"/Users/sepezho/Work/tonana/fe/node_modules/@babel/runtime/helpers/createSuper.js\").default;\nvar _require = require(\"../../boc\"),\n  Cell = _require.Cell;\nvar _require2 = require(\"./WalletContract\"),\n  WalletContract = _require2.WalletContract;\nvar WalletV3ContractBase = /*#__PURE__*/function (_WalletContract) {\n  \"use strict\";\n\n  _inherits(WalletV3ContractBase, _WalletContract);\n  var _super = _createSuper(WalletV3ContractBase);\n  function WalletV3ContractBase() {\n    _classCallCheck(this, WalletV3ContractBase);\n    return _super.apply(this, arguments);\n  }\n  _createClass(WalletV3ContractBase, [{\n    key: \"createSigningMessage\",\n    value:\n    /**\n     * @override\n     * @private\n     * @param   seqno?   {number}\n     * @return {Cell}\n     */\n    function createSigningMessage(seqno) {\n      seqno = seqno || 0;\n      var message = new Cell();\n      message.bits.writeUint(this.options.walletId, 32);\n      if (seqno === 0) {\n        // message.bits.writeInt(-1, 32);// todo: dont work\n        for (var i = 0; i < 32; i++) {\n          message.bits.writeBit(1);\n        }\n      } else {\n        var date = new Date();\n        var timestamp = Math.floor(date.getTime() / 1e3);\n        message.bits.writeUint(timestamp + 60, 32);\n      }\n      message.bits.writeUint(seqno, 32);\n      return message;\n    }\n\n    /**\n     * @override\n     * @return {Cell} cell contains wallet data\n     */\n  }, {\n    key: \"createDataCell\",\n    value: function createDataCell() {\n      var cell = new Cell();\n      cell.bits.writeUint(0, 32);\n      cell.bits.writeUint(this.options.walletId, 32);\n      cell.bits.writeBytes(this.options.publicKey);\n      return cell;\n    }\n  }]);\n  return WalletV3ContractBase;\n}(WalletContract);\nvar WalletV3ContractR1 = /*#__PURE__*/function (_WalletV3ContractBase) {\n  \"use strict\";\n\n  _inherits(WalletV3ContractR1, _WalletV3ContractBase);\n  var _super2 = _createSuper(WalletV3ContractR1);\n  /**\n   * @param provider    {HttpProvider}\n   * @param options {any}\n   */\n  function WalletV3ContractR1(provider, options) {\n    var _this;\n    _classCallCheck(this, WalletV3ContractR1);\n    options.code = Cell.oneFromBoc(\"B5EE9C724101010100620000C0FF0020DD2082014C97BA9730ED44D0D70B1FE0A4F2608308D71820D31FD31FD31FF82313BBF263ED44D0D31FD31FD3FFD15132BAF2A15144BAF2A204F901541055F910F2A3F8009320D74A96D307D402FB00E8D101A4C8CB1FCB1FCBFFC9ED543FBE6EE0\");\n    _this = _super2.call(this, provider, options);\n    if (!_this.options.walletId) _this.options.walletId = 698983191 + _this.options.wc;\n    return _this;\n  }\n  _createClass(WalletV3ContractR1, [{\n    key: \"getName\",\n    value: function getName() {\n      return 'v3R1';\n    }\n  }]);\n  return WalletV3ContractR1;\n}(WalletV3ContractBase);\nvar WalletV3ContractR2 = /*#__PURE__*/function (_WalletV3ContractBase2) {\n  \"use strict\";\n\n  _inherits(WalletV3ContractR2, _WalletV3ContractBase2);\n  var _super3 = _createSuper(WalletV3ContractR2);\n  /**\n   * @param provider    {HttpProvider}\n   * @param options {any}\n   */\n  function WalletV3ContractR2(provider, options) {\n    var _this2;\n    _classCallCheck(this, WalletV3ContractR2);\n    options.code = Cell.oneFromBoc(\"B5EE9C724101010100710000DEFF0020DD2082014C97BA218201339CBAB19F71B0ED44D0D31FD31F31D70BFFE304E0A4F2608308D71820D31FD31FD31FF82313BBF263ED44D0D31FD31FD3FFD15132BAF2A15144BAF2A204F901541055F910F2A3F8009320D74A96D307D402FB00E8D101A4C8CB1FCB1FCBFFC9ED5410BD6DAD\");\n    _this2 = _super3.call(this, provider, options);\n    if (!_this2.options.walletId) _this2.options.walletId = 698983191 + _this2.options.wc;\n    return _this2;\n  }\n  _createClass(WalletV3ContractR2, [{\n    key: \"getName\",\n    value: function getName() {\n      return 'v3R2';\n    }\n  }]);\n  return WalletV3ContractR2;\n}(WalletV3ContractBase);\nmodule.exports = {\n  WalletV3ContractR1: WalletV3ContractR1,\n  WalletV3ContractR2: WalletV3ContractR2\n};","map":{"version":3,"names":["require","Cell","WalletContract","WalletV3ContractBase","seqno","message","bits","writeUint","options","walletId","i","writeBit","date","Date","timestamp","Math","floor","getTime","cell","writeBytes","publicKey","WalletV3ContractR1","provider","code","oneFromBoc","wc","WalletV3ContractR2","module","exports"],"sources":["/Users/sepezho/Work/tonana/fe/node_modules/tonweb/src/contract/wallet/WalletContractV3.js"],"sourcesContent":["const {Cell} = require(\"../../boc\");\nconst {WalletContract} = require(\"./WalletContract\");\n\nclass WalletV3ContractBase extends WalletContract {\n\n    /**\n     * @override\n     * @private\n     * @param   seqno?   {number}\n     * @return {Cell}\n     */\n    createSigningMessage(seqno) {\n        seqno = seqno || 0;\n        const message = new Cell();\n        message.bits.writeUint(this.options.walletId, 32);\n        if (seqno === 0) {\n            // message.bits.writeInt(-1, 32);// todo: dont work\n            for (let i = 0; i < 32; i++) {\n                message.bits.writeBit(1);\n            }\n        } else {\n            const date = new Date();\n            const timestamp = Math.floor(date.getTime() / 1e3);\n            message.bits.writeUint(timestamp + 60, 32);\n        }\n        message.bits.writeUint(seqno, 32);\n        return message;\n    }\n\n    /**\n     * @override\n     * @return {Cell} cell contains wallet data\n     */\n    createDataCell() {\n        const cell = new Cell();\n        cell.bits.writeUint(0, 32);\n        cell.bits.writeUint(this.options.walletId, 32);\n        cell.bits.writeBytes(this.options.publicKey);\n        return cell;\n    }\n}\n\nclass WalletV3ContractR1 extends WalletV3ContractBase {\n    /**\n     * @param provider    {HttpProvider}\n     * @param options {any}\n     */\n    constructor(provider, options) {\n        options.code = Cell.oneFromBoc(\"B5EE9C724101010100620000C0FF0020DD2082014C97BA9730ED44D0D70B1FE0A4F2608308D71820D31FD31FD31FF82313BBF263ED44D0D31FD31FD3FFD15132BAF2A15144BAF2A204F901541055F910F2A3F8009320D74A96D307D402FB00E8D101A4C8CB1FCB1FCBFFC9ED543FBE6EE0\");\n        super(provider, options);\n        if (!this.options.walletId) this.options.walletId = 698983191 + this.options.wc;\n    }\n\n    getName() {\n        return 'v3R1';\n    }\n}\n\nclass WalletV3ContractR2 extends WalletV3ContractBase {\n    /**\n     * @param provider    {HttpProvider}\n     * @param options {any}\n     */\n    constructor(provider, options) {\n        options.code = Cell.oneFromBoc(\"B5EE9C724101010100710000DEFF0020DD2082014C97BA218201339CBAB19F71B0ED44D0D31FD31F31D70BFFE304E0A4F2608308D71820D31FD31FD31FF82313BBF263ED44D0D31FD31FD3FFD15132BAF2A15144BAF2A204F901541055F910F2A3F8009320D74A96D307D402FB00E8D101A4C8CB1FCB1FCBFFC9ED5410BD6DAD\");\n        super(provider, options);\n        if (!this.options.walletId) this.options.walletId = 698983191 + this.options.wc;\n    }\n\n    getName() {\n        return 'v3R2';\n    }\n}\n\nmodule.exports = {WalletV3ContractR1, WalletV3ContractR2};\n\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}